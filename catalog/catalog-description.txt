# Firebird databases have no schemas (or phrased differently, the database is a single unnamed schema).
# A connection is to a single database only, and it is not possible to discover other databases.

# Syntax derived from https://www.jetbrains.com/datagrip/new_dbms/

# Include things like FILTER, CHARACTER SET, COLLATION, database privileges?
Database ::== Table * | View * | StoredProcedure * | Function * | Package * | Domain * | Sequence * | Role * | DatabaseTrigger * | Exception * | User *

# General questions re metadata
# - Include privileges?
# - Include owner?

# Group key, foreign key and check under constraint?
# Handling for external tables? Handling for system tables? List system tables separately, or is TableType sufficient?
# TODO Include external file
Table ::== TableName | TableType | Comments | TableColumn * | Index * | Key * | ForeignKey * | Check * | TableTrigger * 

TableColumn ::== TableName | ColumnName | DomainName | SqlTypeName | NumericPrecision | NumericScale | CharLength | CharacterSetName | CollationName | ColumnDefaultSource | IsComputed | ComputedSource | IsNotNull | FieldPosition | IsIdentity | IdentityType | Comments

# Current query excludes indices backing constraints
Index ::== IndexName | TableName | IsUnique | Direction | IsExpressionIndex | ExpressionSource | IsActive | Comments | IndexColumn*

# Position is only relevant for order in index definition
IndexColumn ::== IndexName | ColumnName | ColumnPosition

# TODO Exclude other trigger types from selection
TableTrigger ::== TriggerName | TableName | IsActive | Phase | MutationTypes | Position | TableName | TriggerSource

View ::== ViewName | ViewSource | Comment | ViewColumn * | ViewTrigger * 

# There is no difference with table triggers
ViewTrigger ::== TriggerName | TableName | IsActive | Phase | MutationTypes | Position | TableName | TriggerSource

# Subset of TableColumn (can be retrieved using the same query)
ViewColumn ::== TableName | ColumnName | DomainName | SqlTypeName | NumericPrecision | NumericScale | CharLength | CharacterSetName | CollationName | IsNotNull | FieldPosition | Comments

# TODO Check how Firebird 3 packages have an effect on this
# TODO Unify Parameter and ReturnColumn?
StoredProcedure ::== ProcedureName | ProcedureType | ProcedureSource | Comment | ProcedureParameter * | ProcedureReturnColumn * 

# TODO: List domain name if applicable?
# TODO: TYPE OF COLUMN names
# TODO: Is IsNotNull relevant for parameters?
ProcedureParameter ::== ProcedureName | ParameterName | SqlTypeName | NumericPrecision | NumericScale | CharLength | CharacterSetName | CollationName | ColumnDefaultSource | IsNotNull | ParameterNumber | Comments

# TODO: List domain name if applicable?
# TODO: TYPE OF COLUMN names
# TODO: Is IsNotNull relevant for return columns?
ProcedureReturnColumn ::== ProcedureName | ReturnColumnName | SqlTypeName | NumericPrecision | NumericScale | CharLength | CharacterSetName | CollationName | ColumnDefaultSource | IsNotNull | ParameterNumber | Comments

# Only user-defined functions (native UDF and stored functions)
# TODO Consider impact of Firebird 3 packages, stored functions and UDR
Function ::== FunctionName | FunctionType | ReturnSqlTypeName | ReturnNumericPrecision | ReturnNumericScale | ReturnCharLength | ReturnCharacterSetName | FunctionSource | FunctionParameter * 

# TODO: List domain name if applicable?
# TODO: TYPE OF COLUMN names
# NOTE: For native UDFs, the ParameterName is NULL
FunctionParameter ::== FunctionName | ParameterName | SqlTypeName | NumericPrecision | NumericScale | CharLength | CharacterSetName | ParameterNumber

# Firebird 3+ feature
Package ::== Name | TODO

Domain ::== DomainName | SqlTypeName | NumericPrecision | NumericScale | CharLength | CharacterSetName | CollationName | ColumnDefaultSource | DomainCheckConstraintSource | IsNotNull | Comments

Sequence ::== SequenceName | Comments

Role ::== Name | Comments

DatabaseTrigger ::== 

Exception ::== Name | Message | Comments

# Visibility of users other than the connected user may be restricted if the user is not SYSDBA or is not connected with the RDB$ADMIN role
# Not selectable in Firebird 2.5 and earlier
User ::== Name | TODO